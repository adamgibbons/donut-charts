<!DOCTYPE html>
<html>
<head>
  <title>Donut Chart</title>
  <!-- Load c3.css -->
  <link href="/node_modules/c3/c3.css" rel="stylesheet">

  <!-- Load d3.js and c3.js -->
  <script src="/node_modules/d3/dist/d3.min.js" charset="utf-8"></script>
  <script src="/node_modules/c3/c3.min.js"></script>  

  <style>
  * {
    font-family: 'helvetica neue', helvetica;
  }
  menu {
    display: none;
  }
  .legend {
    margin: auto;
    text-align: left;
    width: 150px;
  }

  .legend-block {
    margin: 0.33em 0;
  }

  .legend .color {
    height: 1em;
    width: 1em;
    margin-right: .5em;
    display: inline-block;
  }
  </style>
</head>

<body>
  <menu>
    <button id="load">Load</button>
    <button id="unload">Unload</button>
  </menu>

  <div class="chart-container">
    <div id="chart" style="text-align: center;"></div>
  </div>

  <script>

  var LABELS = [
    'Lorem ipsum',
    'Dolor sit',
    'Amet nominati',
    'Patrioque eu usu',
    'Wisi erroribus'
  ]

  var chart = c3.generate({
    data: {
      columns: [
        ['Allocation 1', 3],
        ['Allocation 2', 5],
        ['Allocation 3', 8],
        ['Allocation 4', 13],
        ['Allocation 5', 21]
      ],
      type : 'donut',
      onclick: function (d, i) { console.log("onclick", d, i); },
      onmouseover: function (d, i) { console.log("onmouseover", d, i); },
      onmouseout: function (d, i) { console.log("onmouseout", d, i); }
    },
    donut: {
      title: "Asset Allocation",
      expand: true,
      width: 55,
      label: {
        show: true
      }
    },
    color: {
      pattern: [
        '#ca0020',
        '#f4a582',
        '#bababa',
        '#92c5de',
        '#0571b0'
      ]
    },
    legend: {
      show: false
    },
    size: {
      height: 320,
      width: 500
    }
  });

  function toggle(id) {
    chart.toggle(id);
  }

  var blocks = d3.select('.chart-container')
    .insert('div', '.chart')
    .attr('class', 'legend')
    .selectAll()
    .data(LABELS)
  .enter().append('div')
    .attr('class', 'legend-block')
    .attr('data-id', function (id) { return id; })

  // Legend color
  blocks.append('span')
    .attr('class', 'color')
    .each(function (id) {
        d3.select(this).style('background-color', chart.color(id));
    })
  
  // Legend label
  blocks.append('span')
    .html(function (id) { return id; })
    .attr('data-id', function (id) { return id; })
    // .html(function (id) { return id; })

  // blocks.on('mouseover', function (id) {
  //   chart.focus(id);
  // })
  // .on('mouseout', function (id) {
  //     chart.revert();
  // })
  // .on('click', function (id) {
  //     chart.toggle(id);
  // });

  </script>


</body>
</html>